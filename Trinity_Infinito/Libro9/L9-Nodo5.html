<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="temporal-state" content="absent_present">
    <meta name="philosophical-concept" content="derrida_difference">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%23722f97' opacity='0.4'/></svg>">
    <title>Nodo 5: El Presente Sin Presencia</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at center, #050515, #000);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Courier New', monospace;
            cursor: crosshair;
        }

        .absent-present {
            position: relative;
            width: 750px;
            height: 750px;
        }
        
        .now-void {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border: 2px dashed rgba(147, 51, 234, 0.4);
            border-radius: 50%;
            animation: voidFlicker 3s infinite;
            cursor: pointer;
        }
        
        .now-void:hover {
            border-color: rgba(147, 51, 234, 0.8);
            animation: voidFlicker 0.5s infinite;
        }
        
        @keyframes voidFlicker {
            0%, 100% {
                opacity: 0.2;
                transform: translate(-50%, -50%) scale(1);
            }
            25% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(0.8);
            }
            50% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.2);
            }
            75% {
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(0.9);
            }
        }
        
        .disappearing-moment {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 1px;
            background: linear-gradient(90deg,
                transparent,
                rgba(147, 51, 234, 0.8),
                transparent);
            transform: translate(-50%, -50%);
            animation: momentVanish 2s infinite;
            cursor: pointer;
        }
        
        .disappearing-moment:hover {
            background: linear-gradient(90deg,
                transparent,
                rgba(147, 51, 234, 1),
                rgba(59, 130, 246, 0.8),
                transparent);
            height: 2px;
        }
        
        @keyframes momentVanish {
            0%, 100% {
                opacity: 0;
                transform: translate(-50%, -50%) scaleX(0);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scaleX(1);
            }
        }
        
        .phantom-now {
            position: absolute;
            width: 200px;
            height: 200px;
            border: 1px solid rgba(59, 130, 246, 0.2);
            animation: phantomDrift 10s infinite;
            cursor: pointer;
        }
        
        .phantom-now:hover {
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        @keyframes phantomDrift {
            0%, 100% {
                transform: translate(0, 0);
                opacity: 0;
            }
            25% {
                transform: translate(200px, -100px);
                opacity: 0.5;
            }
            50% {
                transform: translate(-100px, 200px);
                opacity: 0.3;
            }
            75% {
                transform: translate(-200px, -200px);
                opacity: 0.5;
            }
        }
        
        .absence-field {
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-radial-gradient(
                circle at center,
                transparent 0,
                transparent 30px,
                rgba(147, 51, 234, 0.02) 30px,
                rgba(147, 51, 234, 0.02) 31px
            );
            animation: fieldCollapse 8s infinite;
        }
        
        @keyframes fieldCollapse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.5;
            }
            50% {
                transform: scale(0);
                opacity: 0;
            }
        }
        
        .missing-instant {
            position: absolute;
            color: rgba(147, 51, 234, 0.5);
            font-size: 12px;
            animation: instantMissing 5s infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .missing-instant:hover {
            color: rgba(147, 51, 234, 0.9);
            text-shadow: 0 0 10px rgba(147, 51, 234, 0.5);
            font-size: 14px;
        }
        
        @keyframes instantMissing {
            0%, 100% {
                opacity: 0;
                text-decoration: line-through;
            }
            50% {
                opacity: 1;
                text-decoration: none;
            }
        }
        
        .temporal-gap {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 20px;
            background: repeating-linear-gradient(
                90deg,
                rgba(147, 51, 234, 0.3) 0,
                rgba(147, 51, 234, 0.3) 40px,
                transparent 40px,
                transparent 80px
            );
            animation: gapFlow 4s infinite linear;
        }
        
        @keyframes gapFlow {
            from { transform: translateX(0); }
            to { transform: translateX(80px); }
        }
        
        .presence-absence {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 150px;
            height: 150px;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 30px rgba(147, 51, 234, 0.3),
                0 0 30px rgba(59, 130, 246, 0.2);
            animation: presenceAbsence 6s infinite;
            cursor: pointer;
        }
        
        .presence-absence:hover {
            animation: presenceAbsence 1s infinite;
        }
        
        @keyframes presenceAbsence {
            0%, 100% {
                box-shadow: 
                    inset 0 0 30px rgba(147, 51, 234, 0.3),
                    0 0 30px rgba(59, 130, 246, 0.2);
            }
            50% {
                box-shadow: 
                    inset 0 0 0px transparent,
                    0 0 0px transparent;
            }
        }
        
        .derrida-trace {
            position: absolute;
            width: 2px;
            height: 50px;
            background: linear-gradient(to bottom,
                transparent,
                rgba(147, 51, 234, 0.6),
                transparent);
            animation: traceErase 3s infinite;
        }
        
        @keyframes traceErase {
            0%, 100% {
                opacity: 0;
                transform: scaleY(0);
            }
            50% {
                opacity: 1;
                transform: scaleY(1);
            }
        }
        
        .paradox-text {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(59, 130, 246, 0.5);
            font-size: 14px;
            text-align: center;
            animation: textAbsence 5s infinite;
            cursor: pointer;
        }
        
        .paradox-text:hover {
            color: rgba(59, 130, 246, 0.9);
            text-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }
        
        @keyframes textAbsence {
            0%, 100% {
                opacity: 0.5;
                letter-spacing: 2px;
            }
            50% {
                opacity: 0.9;
                letter-spacing: 5px;
            }
        }
        
        .transmission-code {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(147, 51, 234, 0.3);
            font-size: 10px;
            letter-spacing: 2px;
            text-align: center;
        }

        /* NUEVOS ELEMENTOS DERRIDIANOS */
        .difference-field {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                conic-gradient(from 0deg at 50% 50%,
                    transparent 0deg,
                    rgba(147, 51, 234, 0.03) 120deg,
                    transparent 240deg,
                    rgba(59, 130, 246, 0.03) 360deg);
            animation: differenceSpin 25s infinite linear;
            pointer-events: none;
        }
        
        @keyframes differenceSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .trace-echo {
            position: absolute;
            width: 1px;
            height: 30px;
            background: linear-gradient(to bottom,
                transparent,
                rgba(59, 130, 246, 0.4),
                transparent);
            animation: echoFade 4s infinite;
            pointer-events: none;
        }
        
        @keyframes echoFade {
            0%, 100% {
                opacity: 0;
                transform: scaleY(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scaleY(1) rotate(180deg);
            }
        }
        
        .aporía-point {
            position: absolute;
            width: 8px;
            height: 8px;
            background: rgba(147, 51, 234, 0.6);
            border-radius: 50%;
            animation: aporiaPulse 3s infinite;
            cursor: pointer;
        }
        
        @keyframes aporiaPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4);
            }
            50% {
                transform: scale(1.5);
                box-shadow: 0 0 0 8px rgba(147, 51, 234, 0);
            }
        }
        
        .deferral-control {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: rgba(59, 130, 246, 0.6);
            font-size: 12px;
        }
        
        .control-text {
            margin-bottom: 5px;
            animation: controlBreath 4s infinite;
        }
        
        .difference-trigger {
            color: rgba(147, 51, 234, 0.7);
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .difference-trigger:hover {
            color: rgba(147, 51, 234, 1);
            text-shadow: 0 0 8px rgba(147, 51, 234, 0.5);
        }
        
        @keyframes controlBreath {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .instant-fragment {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(147, 51, 234, 0.5);
            border-radius: 50%;
            animation: fragmentScatter 3s infinite;
            pointer-events: none;
        }
        
        @keyframes fragmentScatter {
            0%, 100% {
                transform: translate(0, 0);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
        }
        
        .presence-ghost {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 1px dotted rgba(59, 130, 246, 0.2);
            border-radius: 50%;
            animation: ghostFlicker 7s infinite;
            pointer-events: none;
        }
        
        @keyframes ghostFlicker {
            0%, 100% {
                opacity: 0;
                transform: scale(0.5);
            }
            25% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0;
                transform: scale(1.5);
            }
            75% {
                opacity: 0.2;
                transform: scale(0.8);
            }
        }
    </style>
</head>
<body>
    <div class="absent-present">
        <div class="difference-field"></div>
        <div class="absence-field"></div>
        <div class="temporal-gap"></div>

        <div class="phantom-now" style="top: 200px; left: 200px;"></div>
        <div class="phantom-now" style="top: 200px; right: 200px; animation-delay: 2.5s;"></div>
        <div class="phantom-now" style="bottom: 200px; left: 200px; animation-delay: 5s;"></div>
        <div class="phantom-now" style="bottom: 200px; right: 200px; animation-delay: 7.5s;"></div>
        
        <div class="presence-ghost" style="top: 30%; left: 30%;"></div>
        <div class="presence-ghost" style="top: 30%; right: 30%; animation-delay: 1s;"></div>
        <div class="presence-ghost" style="bottom: 30%; left: 30%; animation-delay: 2s;"></div>
        <div class="presence-ghost" style="bottom: 30%; right: 30%; animation-delay: 3s;"></div>
        
        <div class="aporía-point" style="top: 40%; left: 40%;"></div>
        <div class="aporía-point" style="top: 40%; right: 40%; animation-delay: 1.5s;"></div>
        <div class="aporía-point" style="bottom: 40%; left: 40%; animation-delay: 3s;"></div>
        <div class="aporía-point" style="bottom: 40%; right: 40%; animation-delay: 4.5s;"></div>
        
        <div class="presence-absence"></div>
        <div class="now-void"></div>
        <div class="disappearing-moment"></div>
        
        <div class="deferral-control">
            <div class="control-text">DIFFÉRANCE ACTIVA</div>
            <div class="difference-trigger">ACTUALIZAR DIFERIMIENTO</div>
        </div>
        
        <div class="missing-instant" style="top: 20%; left: 50%; transform: translateX(-50%);">
            AHORA
        </div>
        <div class="missing-instant" style="top: 50%; right: 20%; animation-delay: 1.25s;">
            YA NO
        </div>
        <div class="missing-instant" style="bottom: 20%; left: 50%; transform: translateX(-50%); animation-delay: 2.5s;">
            AÚN NO
        </div>
        <div class="missing-instant" style="top: 50%; left: 20%; animation-delay: 3.75s;">
            NUNCA
        </div>
        
        <div class="paradox-text">
            El presente que nunca está<br>
            La presencia ausente del ahora
        </div>
    </div>

    <div class="transmission-code">
        LIBRO_9::NODO_5::PRESENTE_AUSENTE::ACTIVO<br>
        DIFFÉRANCE::DIFERIMIENTO_ETERNAL
    </div>

    <script>
        class AbsentPresent {
            constructor() {
                this.container = document.querySelector('.absent-present');
                this.nowAttempts = 0;
                this.presenceLevel = 0;
                this.deferralCount = 0;
                this.init();
            }

            init() {
                this.createTraceSystem();
                this.setupInteractions();
                this.startDeferralLoop();
                this.createInstantFragments();
                this.createGhostPresences();
            }

            createTraceSystem() {
                // Sistema continuo de trazas derridianas
                setInterval(() => this.createTrace(), 400);
                setInterval(() => this.createTraceEcho(), 600);
            }

            createTrace() {
                const trace = document.createElement('div');
                trace.className = 'derrida-trace';
                trace.style.left = Math.random() * 100 + '%';
                trace.style.top = Math.random() * 100 + '%';
                trace.style.animationDelay = Math.random() * 3 + 's';
                trace.style.transform = `rotate(${Math.random() * 360}deg)`;
                this.container.appendChild(trace);
                
                setTimeout(() => trace.remove(), 3000);
            }

            createTraceEcho() {
                const echo = document.createElement('div');
                echo.className = 'trace-echo';
                echo.style.left = Math.random() * 100 + '%';
                echo.style.top = Math.random() * 100 + '%';
                echo.style.animationDelay = Math.random() * 2 + 's';
                this.container.appendChild(echo);
                
                setTimeout(() => echo.remove(), 4000);
            }

            createInstantFragments() {
                // Fragmentos del instante que se dispersan
                setInterval(() => {
                    const fragment = document.createElement('div');
                    fragment.className = 'instant-fragment';
                    fragment.style.left = Math.random() * 100 + '%';
                    fragment.style.top = Math.random() * 100 + '%';
                    fragment.style.animationDelay = Math.random() * 3 + 's';
                    this.container.appendChild(fragment);

                    setTimeout(() => fragment.remove(), 3000);
                }, 500);
            }

            createGhostPresences() {
                // Presencias fantasma adicionales
                for (let i = 0; i < 4; i++) {
                    setTimeout(() => this.createGhostPresence(), i * 500);
                }
            }

            createGhostPresence() {
                const ghost = document.createElement('div');
                ghost.className = 'presence-ghost';
                ghost.style.left = (20 + Math.random() * 60) + '%';
                ghost.style.top = (20 + Math.random() * 60) + '%';
                ghost.style.animationDelay = Math.random() * 7 + 's';
                this.container.appendChild(ghost);

                setTimeout(() => {
                    ghost.remove();
                    this.createGhostPresence();
                }, 7000);
            }

            setupInteractions() {
                // Interacción con el vacío del ahora
                document.querySelector('.now-void').addEventListener('click', () => {
                    this.intensifyVoid();
                });

                // Interacción con momentos que desaparecen
                document.querySelector('.disappearing-moment').addEventListener('click', (e) => {
                    this.createMomentEcho(e);
                });

                // Interacción con fantasmas del presente
                document.querySelectorAll('.phantom-now').forEach(phantom => {
                    phantom.addEventListener('click', () => {
                        this.capturePhantom();
                    });
                });

                // Interacción con instantes faltantes
                document.querySelectorAll('.missing-instant').forEach(instant => {
                    instant.addEventListener('click', () => {
                        this.revealInstantParadox(instant.textContent);
                    });
                });

                // Interacción con puntos de aporía
                document.querySelectorAll('.aporía-point').forEach(point => {
                    point.addEventListener('click', () => {
                        this.triggerAporia(point);
                    });
                });

                // Interacción con el trigger de differance
                document.querySelector('.difference-trigger').addEventListener('click', () => {
                    this.activateDifference();
                });

                // Interacción con el texto de paradoja
                document.querySelector('.paradox-text').addEventListener('click', () => {
                    this.revealDeferral();
                });

                // Observación del presente ausente
                document.addEventListener('mousemove', (e) => {
                    this.handlePresentObservation(e);
                });
            }

            intensifyVoid() {
                const nowVoid = document.querySelector('.now-void');
                nowVoid.style.animation = 'voidFlicker 0.2s infinite';
                nowVoid.style.borderColor = 'rgba(147, 51, 234, 1)';
                
                setTimeout(() => {
                    nowVoid.style.animation = 'voidFlicker 3s infinite';
                    nowVoid.style.borderColor = 'rgba(147, 51, 234, 0.4)';
                }, 1000);

                this.logDeferralEvent('Vacío del ahora intensificado por observación');
            }

            createMomentEcho(e) {
                const echo = document.createElement('div');
                echo.style.cssText = `
                    position: absolute;
                    width: 150px;
                    height: 1px;
                    background: linear-gradient(90deg, transparent, rgba(147, 51, 234, 0.6), transparent);
                    left: ${e.clientX}px;
                    top: ${e.clientY}px;
                    pointer-events: none;
                    animation: momentVanish 1s forwards;
                `;
                document.body.appendChild(echo);
                setTimeout(() => echo.remove(), 1000);

                this.logDeferralEvent('Eco de momento creado en el vacío presente');
            }

            capturePhantom() {
                this.logDeferralEvent('Intento de capturar fantasma del presente - Siempre diferido');
                
                // Efecto visual de captura fallida
                document.querySelectorAll('.phantom-now').forEach(phantom => {
                    phantom.style.animation = 'phantomDrift 2s infinite';
                    setTimeout(() => {
                        phantom.style.animation = 'phantomDrift 10s infinite';
                    }, 2000);
                });
            }

            revealInstantParadox(instantText) {
                const inscription = document.querySelector('.paradox-text');
                const originalText = inscription.innerHTML;
                
                inscription.innerHTML = `"${instantText}" - Siempre ya fue o aún no es`;
                inscription.style.color = 'rgba(147, 51, 234, 0.9)';
                
                setTimeout(() => {
                    inscription.innerHTML = originalText;
                    inscription.style.color = 'rgba(59, 130, 246, 0.5)';
                }, 3000);

                this.logDeferralEvent(`Paradoja del instante revelada: ${instantText}`);
            }

            triggerAporia(point) {
                point.style.animation = 'aporiaPulse 0.5s infinite';
                point.style.background = 'rgba(147, 51, 234, 1)';
                
                setTimeout(() => {
                    point.style.animation = 'aporiaPulse 3s infinite';
                    point.style.background = 'rgba(147, 51, 234, 0.6)';
                }, 1500);

                this.logDeferralEvent('Aporía temporal activada - Callejón sin salida del presente');
            }

            activateDifference() {
                const field = document.querySelector('.difference-field');
                field.style.animation = 'differenceSpin 5s infinite linear';
                
                setTimeout(() => {
                    field.style.animation = 'differenceSpin 25s infinite linear';
                }, 3000);

                this.deferralCount++;
                this.logDeferralEvent(`Différance activada - Diferimiento #${this.deferralCount}`);
            }

            revealDeferral() {
                const control = document.querySelector('.control-text');
                const originalText = control.textContent;
                
                control.textContent = 'EL PRESENTE SE DIFIERE...';
                control.style.color = 'rgba(147, 51, 234, 0.9)';
                
                setTimeout(() => {
                    control.textContent = originalText;
                    control.style.color = 'rgba(59, 130, 246, 0.6)';
                }, 2000);

                this.logDeferralEvent('Mecanismo de diferimiento revelado');
            }

            handlePresentObservation(e) {
                // El presente se escapa de la observación
                if (this.nowAttempts % 25 === 0) {
                    const x = (e.clientX / window.innerWidth) * 100;
                    const y = (e.clientY / window.innerHeight) * 100;
                    
                    const observation = document.createElement('div');
                    observation.style.cssText = `
                        position: absolute;
                        width: 1px;
                        height: 1px;
                        background: rgba(6, 182, 212, 0.1);
                        border-radius: 50%;
                        left: ${x}%;
                        top: ${y}%;
                        pointer-events: none;
                        box-shadow: 0 0 10px 2px rgba(6, 182, 212, 0.3);
                    `;
                    this.container.appendChild(observation);
                    
                    setTimeout(() => observation.remove(), 1000);
                }
            }

            startDeferralLoop() {
                // El presente que se escapa
                setInterval(() => {
                    this.nowAttempts++;
                    this.presenceLevel = Math.sin(this.nowAttempts / 50) * 0.5 + 0.5;
                    
                    // El presente siempre ya pasó o aún no llega
                    if (this.nowAttempts % 100 === 0) {
                        this.logDeferralEvent('El presente: siempre diferido, nunca presente');
                    }
                    
                    // Différance derridiana
                    if (this.nowAttempts % 200 === 0) {
                        this.logDeferralEvent('Différance: El presente difiere y difiere de sí mismo');
                    }
                    
                    // La aporía del ahora
                    if (this.nowAttempts % 377 === 0) {
                        this.logDeferralEvent('Aporía temporal: El ahora no tiene duración, por lo tanto no existe');
                    }
                }, 50);
            }

            logDeferralEvent(message) {
                console.log(`[AbsentPresent] ${message}`);
            }
        }

        // Inicializar cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', () => {
            new AbsentPresent();
            console.log('Nodo 5 activo: El presente sin presencia, el ahora ausente de sí mismo');
        });

        // Efecto de carga inicial
        window.addEventListener('load', () => {
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 1.5s ease';
            
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
</body>
</html>
