<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Mapa Es el Territorio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            /* NUEVO: Prevenir destellos de hardware */
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        body {
            background: linear-gradient(45deg, #000428, #001933);
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .territory-container {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }
        
        .map-layer {
            position: absolute;
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border: 1px solid rgba(200,200,200,0.2);
            /* CORRECCIÓN: Gradiente más oscuro */
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(180,180,180,0.03) 10px,
                rgba(180,180,180,0.03) 20px
            );
            transform: rotateX(60deg) rotateZ(45deg);
            animation: mapShift 12s infinite alternate ease-in-out;
        }
        
        @keyframes mapShift {
            0% {
                transform: rotateX(60deg) rotateZ(45deg) scale(1);
                opacity: 0.2;
            }
            100% {
                transform: rotateX(30deg) rotateZ(135deg) scale(1.2);
                opacity: 0.6;
            }
        }
        
        .territory-layer {
            position: absolute;
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border: 2px solid rgba(0,200,200,0.4);
            /* CORRECCIÓN: Gradiente más oscuro */
            background: radial-gradient(circle at center, 
                rgba(0,180,180,0.08), 
                transparent 70%);
            animation: territoryPulse 10s infinite alternate ease-in-out;
        }
        
        @keyframes territoryPulse {
            0% {
                transform: scale(1) rotateZ(0deg);
                /* CORRECCIÓN: Box-shadow más suave */
                box-shadow: 0 0 40px rgba(0,200,200,0.3);
            }
            100% {
                transform: scale(0.9) rotateZ(-45deg);
                box-shadow: 0 0 80px rgba(0,200,200,0.5);
            }
        }
        
        /* CORRECCIÓN PRINCIPAL: Unity point sin blanco */
        .unity-point {
            position: absolute;
            width: 16px;
            height: 16px;
            /* GRADIENTE CORREGIDO: Sin blanco, tonos más oscuros */
            background: radial-gradient(
                circle,
                rgba(220, 180, 100, 0.7) 0%,
                rgba(150, 200, 200, 0.5) 40%,
                rgba(80, 150, 180, 0.3) 70%,
                transparent 100%
            );
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* BOX-SHADOW CORREGIDO: Sin blanco puro */
            box-shadow: 
                0 0 20px rgba(220, 180, 100, 0.4),
                0 0 40px rgba(150, 200, 200, 0.2);
            animation: unityGlow 4s infinite ease-in-out;
            /* NUEVO: Prevenir destellos */
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        
        @keyframes unityGlow {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 
                    0 0 20px rgba(220, 180, 100, 0.4),
                    0 0 40px rgba(150, 200, 200, 0.2);
                opacity: 0.7;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.3);
                box-shadow: 
                    0 0 40px rgba(220, 180, 100, 0.5),
                    0 0 80px rgba(150, 200, 200, 0.3),
                    0 0 120px rgba(120, 180, 200, 0.1);
                opacity: 0.9;
            }
        }
        
        .coordinate {
            position: absolute;
            font-size: 11px;
            /* CORRECCIÓN: Verde más oscuro */
            color: rgba(0, 200, 0, 0.7);
            font-family: monospace;
            animation: coordinateFloat 18s infinite linear;
            --endX: 0px;
            --endY: 0px;
            text-shadow: 0 0 3px rgba(0, 200, 0, 0.3);
        }
        
        @keyframes coordinateFloat {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            15% {
                opacity: 0.6;
            }
            80% {
                opacity: 0.4;
            }
            100% {
                transform: translate(var(--endX), var(--endY)) scale(1.5);
                opacity: 0;
            }
        }
        
        .reality-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            /* CORRECCIÓN: Grid más oscuro */
            background-image: 
                linear-gradient(rgba(0,180,0,0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,180,0,0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridScroll 25s infinite linear;
        }
        
        @keyframes gridScroll {
            from { transform: translate(0, 0); }
            to { transform: translate(50px, 50px); }
        }
        
        .wisdom-territory {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-size: 18px;
            /* CORRECCIÓN: Dorado más oscuro */
            color: rgba(220, 180, 50, 0.8);
            text-shadow: 0 0 15px rgba(220, 180, 50, 0.3);
            animation: territoryWisdom 6s infinite ease-in-out;
            width: 90%;
            z-index: 100;
        }
        
        @keyframes territoryWisdom {
            0%, 100% { 
                opacity: 0.3;
                transform: translateX(-50%) scale(0.95);
            }
            50% { 
                opacity: 0.8;
                transform: translateX(-50%) scale(1);
            }
        }
        
        .borges-quote {
            position: absolute;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            font-style: italic;
            /* CORRECCIÓN: Cyan más oscuro */
            color: rgba(0, 180, 180, 0.7);
            text-shadow: 0 0 10px rgba(0, 180, 180, 0.3);
            font-size: 15px;
            width: 80%;
            text-align: center;
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.2;
        }

        /* NUEVO: Capa supresora de destellos */
        .territory-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            z-index: 50;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <canvas id="mapCanvas"></canvas>

    <div class="borges-quote">
        "El mapa del imperio tenía el tamaño del imperio..."
    </div>

    <div class="territory-container">
        <div class="reality-grid"></div>
        <div class="territory-layer"></div>
        <div class="map-layer"></div>
        <div class="unity-point"></div>
    </div>

    <div class="wisdom-territory">
        No hay representación y realidad<br>
        El mapa ES el territorio<br>
        La descripción ES lo descrito
    </div>

    <script>
        // Canvas para líneas de conexión
        const canvas = document.getElementById('mapCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const points = [];
        for (let i = 0; i < 15; i++) {
            points.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 1.5,
                vy: (Math.random() - 0.5) * 1.5
            });
        }
        
        function drawConnections() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.03)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Actualizar y dibujar puntos
            points.forEach(point => {
                point.x += point.vx;
                point.y += point.vy;
                
                if (point.x < 0 || point.x > canvas.width) point.vx *= -1;
                if (point.y < 0 || point.y > canvas.height) point.vy *= -1;
                
                // CORRECCIÓN: Puntos más oscuros
                ctx.fillStyle = 'rgba(0, 180, 180, 0.5)';
                ctx.beginPath();
                ctx.arc(point.x, point.y, 1.5, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Dibujar conexiones
            ctx.strokeStyle = 'rgba(0, 180, 180, 0.15)';
            ctx.lineWidth = 0.8;
            
            for (let i = 0; i < points.length; i++) {
                for (let j = i + 1; j < points.length; j++) {
                    const dist = Math.hypot(points[i].x - points[j].x, points[i].y - points[j].y);
                    if (dist < 150) {
                        ctx.beginPath();
                        ctx.moveTo(points[i].x, points[i].y);
                        ctx.lineTo(points[j].x, points[j].y);
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(drawConnections);
        }
        
        drawConnections();
        
        // Crear coordenadas flotantes (menos frecuentes)
        function createCoordinate() {
            const coord = document.createElement('div');
            coord.className = 'coordinate';
            coord.textContent = `[${Math.floor(Math.random() * 800)}, ${Math.floor(Math.random() * 800)}]`;
            
            const startX = Math.random() * window.innerWidth;
            const startY = Math.random() * window.innerHeight;
            
            coord.style.left = startX + 'px';
            coord.style.top = startY + 'px';
            coord.style.setProperty('--endX', (Math.random() - 0.5) * 400 + 'px');
            coord.style.setProperty('--endY', (Math.random() - 0.5) * 400 + 'px');
            
            document.body.appendChild(coord);
            
            setTimeout(() => coord.remove(), 18000);
        }
        
        setInterval(createCoordinate, 1500);
        
        // Crear capas adicionales de mapa/territorio (menos frecuentes)
        const container = document.querySelector('.territory-container');
        
        function createLayer(isMap) {
            const layer = document.createElement('div');
            layer.className = isMap ? 'map-layer' : 'territory-layer';
            layer.style.width = (60 + Math.random() * 25) + '%';
            layer.style.height = (60 + Math.random() * 25) + '%';
            layer.style.top = (10 + Math.random() * 20) + '%';
            layer.style.left = (10 + Math.random() * 20) + '%';
            layer.style.opacity = '0.15';
            layer.style.animationDuration = (10 + Math.random() * 5) + 's';
            
            container.appendChild(layer);
            
            setTimeout(() => layer.remove(), 12000);
        }
        
        setInterval(() => createLayer(Math.random() > 0.5), 4000);
        
        // Textos de sabiduría cambiantes
        const wisdoms = [
            "No hay representación y realidad<br>El mapa ES el territorio<br>La descripción ES lo descrito",
            "El símbolo y lo simbolizado<br>Son uno y lo mismo<br>La dualidad es la ilusión",
            "El nombre es la cosa<br>La palabra es el mundo<br>El pensamiento es la realidad",
            "No buscas el territorio en el mapa<br>El mapa mismo es todo lo que hay<br>La búsqueda es el hallazgo",
            "La conciencia no representa la realidad<br>La conciencia ES la realidad<br>No hay afuera del mapa"
        ];
        
        let wisdomIndex = 0;
        setInterval(() => {
            wisdomIndex = (wisdomIndex + 1) % wisdoms.length;
            document.querySelector('.wisdom-territory').innerHTML = wisdoms[wisdomIndex];
        }, 6000);
        
        // Cambiar cita de Borges
        const quotes = [
            '"El mapa del imperio tenía el tamaño del imperio..."',
            '"En aquel Imperio, el Arte de la Cartografía logró tal Perfección..."',
            '"...coincidía puntualmente con él"',
            '"Las generaciones siguientes entendieron que ese dilatado Mapa era Inútil"',
            '"En los desiertos del Oeste perduran despedazadas Ruinas del Mapa"'
        ];
        
        let quoteIndex = 0;
        setInterval(() => {
            quoteIndex = (quoteIndex + 1) % quotes.length;
            document.querySelector('.borges-quote').textContent = quotes[quoteIndex];
        }, 8000);
    </script>
</body>
</html>
