<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nodo 3: El Fuego del Dolor - Transmutaci√≥n Interna</title>
    <meta name="description" content="El momento en que el dolor deja de ser visitante y se convierte en alquimista. El fuego que quema solo lo que ya no somos">
    
    <style>
        :root {
            --rojo-profundo: #8B0000;
            --naranja-fuego: #FF4500;
            --dorado-sabiduria: #FFD700;
            --blanco-luz: #FFFAF0;
            --negro-profundo: #0a0a0a;
            --gris-ceniza: #4a4a4a;
            --rojo-intenso: #DC143C;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2a0000 0%, #0a0a0a 100%);
            color: var(--blanco-luz);
            line-height: 1.8;
        }

        /* Canvas de fuego intenso */
        #fuego-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.3;
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 30px;
        }

        /* Header del nodo */
        .nodo-header {
            text-align: center;
            padding: 60px 20px 40px;
            border-bottom: 3px solid var(--rojo-intenso);
            margin-bottom: 50px;
        }

        .nodo-simbolo {
            font-size: 4em;
            margin-bottom: 20px;
            animation: fuego-intenso 2s ease-in-out infinite;
        }

        @keyframes fuego-intenso {
            0%, 100% { 
                transform: scale(1) rotate(-5deg);
                filter: drop-shadow(0 0 20px var(--rojo-intenso)) brightness(1);
            }
            50% { 
                transform: scale(1.15) rotate(5deg);
                filter: drop-shadow(0 0 40px var(--naranja-fuego)) brightness(1.3);
            }
        }

        .nodo-numero {
            font-size: 1.1em;
            color: var(--dorado-sabiduria);
            letter-spacing: 2px;
            margin-bottom: 15px;
        }

        .nodo-titulo {
            font-size: 3em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--rojo-intenso), var(--naranja-fuego), var(--dorado-sabiduria));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.3;
        }

        .nodo-subtitulo {
            font-size: 1.3em;
            color: var(--gris-ceniza);
            font-style: italic;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Intensidad m√°xima - 3 llamas */
        .intensidad-maxima {
            text-align: center;
            margin: 30px 0;
            font-size: 2em;
        }

        .llama {
            display: inline-block;
            margin: 0 10px;
            animation: llama-ardiente 1.5s ease-in-out infinite;
        }

        .llama:nth-child(2) {
            animation-delay: 0.3s;
        }

        .llama:nth-child(3) {
            animation-delay: 0.6s;
        }

        @keyframes llama-ardiente {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.2); }
        }

        /* Navegaci√≥n */
        .navegacion {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 40px;
        }

        .nav-btn {
            padding: 12px 25px;
            color: var(--naranja-fuego);
            text-decoration: none;
            border: 2px solid var(--naranja-fuego);
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .nav-btn:hover {
            background: var(--naranja-fuego);
            color: var(--negro-profundo);
            box-shadow: 0 5px 20px rgba(255, 69, 0, 0.5);
            transform: translateY(-2px);
        }

        /* Contenido principal */
        .contenido-nodo {
            background: rgba(139, 0, 0, 0.08);
            border-left: 4px solid var(--rojo-intenso);
            padding: 50px;
            margin: 40px 0;
            border-radius: 10px;
        }

        .contenido-nodo p {
            font-size: 1.15em;
            margin-bottom: 30px;
            text-align: justify;
            line-height: 2;
        }

        .contenido-nodo p:first-child::first-letter {
            font-size: 4em;
            float: left;
            line-height: 0.8;
            margin: 10px 10px 0 0;
            color: var(--rojo-intenso);
            font-weight: bold;
        }

        .contenido-nodo strong {
            color: var(--dorado-sabiduria);
            font-weight: normal;
        }

        .contenido-nodo em {
            color: var(--naranja-fuego);
            font-style: italic;
        }

        /* Citas destacadas */
        .cita-destacada {
            background: rgba(220, 20, 60, 0.15);
            border-left: 5px solid var(--rojo-intenso);
            padding: 30px 40px;
            margin: 50px 0;
            font-size: 1.3em;
            font-style: italic;
            color: var(--blanco-luz);
            position: relative;
        }

        .cita-destacada::before {
            content: 'üî•';
            position: absolute;
            top: -20px;
            left: 20px;
            font-size: 4em;
            opacity: 0.3;
        }

        /* Pregunta transformadora */
        .pregunta-transformadora {
            background: linear-gradient(135deg, rgba(220, 20, 60, 0.2), rgba(255, 69, 0, 0.15));
            border: 3px solid var(--dorado-sabiduria);
            border-radius: 15px;
            padding: 50px;
            margin: 60px 0;
            text-align: center;
        }

        .pregunta-titulo {
            font-size: 2em;
            color: var(--dorado-sabiduria);
            margin-bottom: 30px;
        }

        .pregunta-texto {
            font-size: 1.4em;
            line-height: 1.8;
            color: var(--blanco-luz);
            font-style: italic;
            font-weight: bold;
        }

        /* Reflexi√≥n interactiva */
        .reflexion-box {
            background: rgba(255, 215, 0, 0.05);
            border: 2px solid var(--dorado-sabiduria);
            border-radius: 15px;
            padding: 40px;
            margin: 60px 0;
        }

        .reflexion-titulo {
            font-size: 1.8em;
            color: var(--dorado-sabiduria);
            margin-bottom: 20px;
            text-align: center;
        }

        .reflexion-pregunta {
            font-size: 1.2em;
            color: var(--blanco-luz);
            margin: 20px 0;
            padding-left: 20px;
            border-left: 3px solid var(--rojo-intenso);
        }

        /* Meditaci√≥n */
        .meditacion-container {
            background: linear-gradient(135deg, rgba(220, 20, 60, 0.25), rgba(255, 69, 0, 0.15));
            border: 2px solid var(--rojo-intenso);
            border-radius: 20px;
            padding: 50px;
            margin: 60px 0;
            text-align: center;
        }

        .meditacion-titulo {
            font-size: 2em;
            color: var(--dorado-sabiduria);
            margin-bottom: 30px;
        }

        .meditacion-icono {
            font-size: 3em;
            margin: 20px 0;
            animation: fuego-meditacion 3s ease-in-out infinite;
        }

        @keyframes fuego-meditacion {
            0%, 100% { 
                transform: scale(1) rotate(0deg); 
                filter: hue-rotate(0deg);
            }
            50% { 
                transform: scale(1.2) rotate(10deg); 
                filter: hue-rotate(30deg);
            }
        }

        .meditacion-texto {
            font-size: 1.15em;
            line-height: 2;
            color: var(--blanco-luz);
            font-style: italic;
            max-width: 700px;
            margin: 0 auto;
        }

        .meditacion-boton {
            display: inline-block;
            margin-top: 30px;
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--rojo-intenso), var(--naranja-fuego));
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-size: 1.1em;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .meditacion-boton:hover {
            background: linear-gradient(135deg, var(--dorado-sabiduria), var(--rojo-intenso));
            transform: scale(1.05);
            box-shadow: 0 5px 25px rgba(255, 215, 0, 0.4);
        }

        /* Navegaci√≥n inferior */
        .navegacion-nodos {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 80px 0 40px;
            padding: 30px;
            background: rgba(220, 20, 60, 0.1);
            border-radius: 15px;
        }

        .nodo-anterior, .nodo-siguiente {
            flex: 1;
        }

        .nodo-anterior {
            text-align: left;
        }

        .nodo-siguiente {
            text-align: right;
        }

        .nodo-link {
            display: inline-block;
            padding: 15px 30px;
            color: var(--naranja-fuego);
            text-decoration: none;
            border: 2px solid var(--naranja-fuego);
            border-radius: 30px;
            transition: all 0.3s ease;
            font-size: 1.05em;
        }

        .nodo-link:hover {
            background: var(--naranja-fuego);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(255, 69, 0, 0.4);
        }

        .nodo-centro {
            flex: 1;
            text-align: center;
            color: var(--gris-ceniza);
            font-size: 0.95em;
        }

        /* Progreso */
        .progreso-container {
            margin: 40px 0;
            text-align: center;
        }

        .progreso-barra {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progreso-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--rojo-intenso), var(--naranja-fuego), var(--dorado-sabiduria));
            width: 42.84%; /* 3 de 7 nodos */
            transition: width 0.5s ease;
            box-shadow: 0 0 15px var(--rojo-intenso);
        }

        .progreso-texto {
            color: var(--gris-ceniza);
            font-size: 0.95em;
        }

        /* Footer */
        .nodo-footer {
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top: 2px solid rgba(220, 20, 60, 0.3);
        }

        .footer-texto {
            color: var(--gris-ceniza);
            margin: 10px 0;
            font-size: 0.9em;
        }

        /* Volver arriba */
        .volver-arriba {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--rojo-intenso), var(--naranja-fuego));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            font-size: 1.8em;
            border: 2px solid var(--dorado-sabiduria);
        }

        .volver-arriba.visible {
            opacity: 1;
        }

        .volver-arriba:hover {
            transform: scale(1.15);
            box-shadow: 0 5px 25px rgba(220, 20, 60, 0.6);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nodo-titulo {
                font-size: 2.2em;
            }

            .contenido-nodo {
                padding: 30px;
            }

            .navegacion-nodos {
                flex-direction: column;
                gap: 20px;
            }

            .nodo-anterior, .nodo-siguiente {
                text-align: center;
            }

            .reflexion-box, .meditacion-container {
                padding: 30px;
            }
        }

        /* Animaci√≥n de entrada */
        .fade-in {
            animation: fadeIn 1.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Canvas de fuego intenso -->
    <canvas id="fuego-canvas"></canvas>

    <!-- Volver arriba -->
    <div class="volver-arriba" id="volverArriba" onclick="scrollToTop()">‚Üë</div>

    <div class="container">
        <!-- Header del Nodo -->
        <header class="nodo-header fade-in">
            <div class="nodo-simbolo">üî•</div>
            <div class="nodo-numero">NODO 3 de 7</div>
            <h1 class="nodo-titulo">El Fuego del Dolor: Transmutaci√≥n Interna</h1>
            <p class="nodo-subtitulo">El momento en que el dolor deja de ser visitante y se convierte en alquimista. El fuego que quema solo lo que ya no somos</p>
            
            <!-- Intensidad m√°xima -->
            <div class="intensidad-maxima">
                <span class="llama">üî•</span>
                <span class="llama">üî•</span>
                <span class="llama">üî•</span>
            </div>
        </header>

        <!-- Navegaci√≥n superior -->
        <nav class="navegacion">
            <a href="nodo_02.html" class="nav-btn">‚Üê Nodo Anterior</a>
            <a href="index.html" class="nav-btn">√çndice del Libro</a>
            <a href="nodo_04.html" class="nav-btn">Siguiente Nodo ‚Üí</a>
        </nav>

        <!-- Progreso -->
        <div class="progreso-container">
            <div class="progreso-barra">
                <div class="progreso-fill"></div>
            </div>
            <p class="progreso-texto">Nodo 3 de 7 ‚Ä¢ El Fuego del Dolor - Transmutaci√≥n Interna</p>
        </div>

        <!-- Contenido Principal -->
        <article class="contenido-nodo fade-in">
            <p>Existe un momento en la vida del alma donde el dolor deja de ser visitante y se convierte en alquimista. Donde ya no llega para mostrarnos lo que est√° roto, sino para quemar lo que nunca fue verdadero. Es el momento en que el sufrimiento revela su naturaleza √≠gnea: no viene a destruir, sino a purificar.</p>

            <p>Hay dolores que consumen. Que arden por dentro como brasas vivas, carbonizando los mapas antiguos con los que naveg√°bamos la existencia, las creencias heredadas que nunca cuestionamos, las m√°scaras que cre√≠amos que eran nuestra piel. <strong>Este fuego no es accidental. Es la intensidad sagrada de la conciencia confrontando todo aquello que ya no resuena con la verdad de lo que estamos destinados a ser.</strong></p>

            <p>El fuego del dolor no pide permiso. No negocia. No espera que estemos listos. Arrasa con la precisi√≥n de una fuerza c√≥smica que sabe exactamente qu√© debe quemar y qu√© debe preservar. Y aunque a la mente esto le parezca crueldad, al alma le parece justicia divina: <em>por fin ha llegado el tiempo de la verdad.</em></p>
        </article>

        <!-- Cita destacada 1 -->
        <div class="cita-destacada fade-in">
            Este fuego es alqu√≠mico, una manifestaci√≥n de la Conciencia Primordial que se auto-experimenta, disolviendo patrones que ya no resuenan con su prop√≥sito de auto-expansi√≥n.
        </div>

        <!-- Continuaci√≥n del contenido -->
        <article class="contenido-nodo fade-in">
            <p>Este fuego es alqu√≠mico, una manifestaci√≥n de la Conciencia Primordial que se auto-experimenta, disolviendo patrones que ya no resuenan con su prop√≥sito de auto-expansi√≥n. Es una interferencia constructiva que desestructura lo que ya no es aut√©ntico, forzando una focalizaci√≥n hacia lo esencial. Quema lo que ya no somos, incendia los andamios del ego que construimos para protegernos de la vastedad de lo que realmente somos.</p>

            <p>Nos deja desnudos, pero no destruidos. Nos deja vulnerables, pero no rotos. Nos deja sin m√°scaras, pero finalmente vivos. Porque en el coraz√≥n de toda crisis aut√©ntica vive un secreto luminoso: <strong>la crisis no es un error del sistema. Es el lenguaje m√°s directo de la transformaci√≥n.</strong></p>

            <p>La crisis es la cris√°lida en llamas donde muere la oruga para que algo completamente impensado pueda tomar forma. No es un accidente. No es una falla. Es un salto evolutivo de la conciencia hacia una nueva organizaci√≥n de s√≠ misma, hacia un nuevo nivel de coherencia y complejidad, un punto de inflexi√≥n hacia una nueva organizaci√≥n de la Conciencia.</p>
        </article>

        <!-- Pregunta Transformadora -->
        <div class="pregunta-transformadora fade-in">
            <h3 class="pregunta-titulo">üî• La Pregunta del Fuego üî•</h3>
            <p class="pregunta-texto">
                ¬øQui√©n soy cuando todo lo que cre√≠a ser se derrumba?
            </p>
        </div>

        <!-- Continuaci√≥n del contenido -->
        <article class="contenido-nodo fade-in">
            <p>Y en el centro de esta hoguera sagrada surge la pregunta m√°s transformadora que el alma puede hacerse: <em>¬øQui√©n soy cuando todo lo que cre√≠a ser se derrumba?</em> Esta pregunta llega como chispa sagrada, como koan viviente que no busca una respuesta mental sino un reconocimiento existencial. Es una invitaci√≥n a la auto-indagaci√≥n que nos empuja m√°s all√° de la narrativa del yo herido hacia el campo que recuerda su forma arm√≥nica.</p>

            <p>Es la invitaci√≥n m√°s radical que podemos recibir: la invitaci√≥n a descubrir qu√© permanece cuando todo lo perif√©rico ha sido consumido por las llamas. Qu√© hay en nosotros que es incombustible. Qu√© aspecto de nuestro ser es tan esencial que puede atravesar cualquier destrucci√≥n y emerger no solo intacto, sino m√°s luminoso.</p>

            <p>En estos momentos de incendio interior, la narrativa familiar del "yo herido" comienza a disolverse. Las historias que nos cont√°bamos sobre qui√©nes somos y por qu√© sufrimos se revelan como construcciones fr√°giles que no pueden sobrevivir al fuego de la presencia aut√©ntica. Y en esa disoluci√≥n, algo inmensamente m√°s vasto comienza a revelarse.</p>
        </article>

        <!-- Cita destacada 2 -->
        <div class="cita-destacada fade-in">
            No hay nacimiento aut√©ntico sin esta quemadura sagrada. No hay libertad real sin la renuncia consciente a lo falso. No hay identidad verdadera sin haber atravesado el incendio que separa lo que somos de lo que cre√≠amos ser.
        </div>

        <!-- Continuaci√≥n del contenido -->
        <article class="contenido-nodo fade-in">
            <p>Comenzamos a intuir que no somos los fragmentos rotos que cre√≠amos ser, sino melod√≠as suspendidas esperando volver a sonar. Que lo que experimentamos como crisis es en realidad el proceso de afinaci√≥n de una orquesta interior que hab√≠a estado tocando notas discordantes durante a√±os, una multivoz del yo que necesita ser afinada en una sinfon√≠a coherente.</p>

            <p><strong>No hay nacimiento aut√©ntico sin esta quemadura sagrada.</strong> No hay libertad real sin la renuncia consciente a lo falso. No hay identidad verdadera sin haber atravesado el incendio que separa lo que somos de lo que cre√≠amos ser. La sanaci√≥n no es un retorno al estado anterior, sino un reacuerdo del Ser con una nueva conciencia, un rito de pasaje que facilita la transici√≥n del individuo hacia lo transpersonal y colectivo.</p>

            <p>La transformaci√≥n que emerge de este fuego no es un retorno al estado anterior con algunas reparaciones. Es algo completamente nuevo: un reacuerdo del ser consigo mismo desde una octava m√°s alta de conciencia. Es un rito de pasaje que facilita la transici√≥n de lo meramente personal hacia lo transpersonal, de lo individual hacia lo universal.</p>

            <p>El fuego del dolor es feroz en su amor, pero tambi√©n perfectamente justo: solo quema lo que ya estaba muerto, lo que ya hab√≠a perdido su vitalidad pero segu√≠a ocupando espacio en el jard√≠n del alma. Libera las formas cristalizadas del trauma, permite que las ondas interrumpidas de la vida vuelvan a fluir, devuelve el movimiento a lo que hab√≠a quedado congelado en el tiempo.</p>

            <p>En este sentido, el dolor transmutador no es el enemigo de la felicidad. Es su alquimista. No es lo opuesto a la paz. Es su partera. No destruye el amor. Lo refina hasta que se vuelve indestructible.</p>

            <p>Porque lo que emerge del otro lado de este fuego ya no es la personalidad fr√°gil que necesitaba protegerse de la vida. Es una presencia que puede danzar con cualquier experiencia sin perder su centro. Una conciencia que ha aprendido a ser hogar de todos los estados sin identificarse completamente con ninguno.</p>
        </article>

        <!-- Cita final del nodo -->
        <div class="cita-destacada fade-in">
            Esta es la paradoja m√°s hermosa del fuego del dolor: mientras m√°s nos quema, m√°s nos revela nuestra naturaleza incombustible. El fuego transforma‚Ä¶ y en su n√∫cleo, revela.
        </div>

        <!-- Reflexi√≥n Interactiva -->
        <div class="reflexion-box fade-in">
            <h3 class="reflexion-titulo">üî• Reflexiones del Fuego Alqu√≠mico üî•</h3>
            
            <div class="reflexion-pregunta">
                ¬øQu√© m√°scaras est√° quemando el fuego en tu vida ahora mismo?
            </div>
            
            <div class="reflexion-pregunta">
                ¬øQu√© creencias sobre ti mismo se est√°n desintegrando en las llamas?
            </div>
            
            <div class="reflexion-pregunta">
                ¬øQu√© descubres que es incombustible en ti, que permanece incluso en medio del fuego m√°s intenso?
            </div>
            
            <div class="reflexion-pregunta">
                Si el fuego del dolor es un alquimista, ¬øen qu√© te est√° transformando?
            </div>
        </div>

        <!-- Meditaci√≥n -->
        <div class="meditacion-container fade-in" id="meditacion">
            <h3 class="meditacion-titulo">Meditaci√≥n del Fuego Purificador</h3>
            <div class="meditacion-icono">üî•</div>
            <p class="meditacion-texto">
                Cierra los ojos. Respira profundo. Visualiza un fuego sagrado en tu interior... Las llamas no te destruyen, te purifican. Observa qu√© m√°scaras, qu√© creencias falsas, qu√© identidades prestadas se est√°n quemando. No te resistas. Pregunta al fuego: "¬øQu√© verdad quieres revelar en m√≠?" Y permite que las llamas muestren lo que es incombustible en tu ser. Esa es tu esencia. Eso eres t√∫.
            </p>
            <button class="meditacion-boton" onclick="iniciarMeditacion()">üî• Iniciar Meditaci√≥n (10 min)</button>
        </div>

        <!-- Navegaci√≥n entre nodos -->
        <nav class="navegacion-nodos">
            <div class="nodo-anterior">
                <a href="nodo_02.html" class="nodo-link">‚Üê Anterior: El Trauma</a>
            </div>
            <div class="nodo-centro">
                Nodo 3 de 7
            </div>
            <div class="nodo-siguiente">
                <a href="nodo_04.html" class="nodo-link">Siguiente: El Silencio ‚Üí</a>
            </div>
        </nav>

        <!-- Footer -->
        <footer class="nodo-footer">
            <p class="footer-texto">El Dolor como Portal - Nodo 3: El Fuego del Dolor</p>
            <p class="footer-texto">üî• ‚óà üî•</p>
        </footer>
    </div>

    <script>
        // Canvas de fuego intenso
        const canvas = document.getElementById('fuego-canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class ParticolaFuego {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height + Math.random() * 100;
                this.velocidadY = -(Math.random() * 3 + 2);
                this.velocidadX = (Math.random() - 0.5) * 2;
                this.tamano = Math.random() * 4 + 2;
                this.opacidad = Math.random() * 0.8 + 0.4;
                this.color = Math.random() > 0.6 ? '#DC143C' : (Math.random() > 0.5 ? '#FF4500' : '#FFD700');
            }

            actualizar() {
                this.y += this.velocidadY;
                this.x += this.velocidadX;
                this.opacidad -= 0.008;
                this.tamano -= 0.05;
                
                if (this.y < 0 || this.opacidad <= 0 || this.tamano <= 0) {
                    this.y = canvas.height + Math.random() * 100;
                    this.x = Math.random() * canvas.width;
                    this.opacidad = Math.random() * 0.8 + 0.4;
                    this.tamano = Math.random() * 4 + 2;
                }
            }

            dibujar() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.tamano, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.opacidad;
                ctx.fill();
            }
        }

        const particulas = [];
        for (let i = 0; i < 80; i++) {
            particulas.push(new ParticolaFuego());
        }

        function animarFuego() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particulas.forEach(particula => {
                particula.actualizar();
                particula.dibujar();
            });

            requestAnimationFrame(animarFuego);
        }

        animarFuego();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Volver arriba
        const volverArriba = document.getElementById('volverArriba');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                volverArriba.classList.add('visible');
            } else {
                volverArriba.classList.remove('visible');
            }
        });

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Meditaci√≥n
        function iniciarMeditacion() {
            alert('üî• Meditaci√≥n del Fuego Purificador\n\n10 minutos de transmutaci√≥n consciente.\n\nCierra los ojos.\nVisualiza el fuego sagrado.\nObserva qu√© se quema.\nReconoce lo incombustible.\nEso es tu esencia verdadera.\n\n(Timer: configura 10 minutos en tu dispositivo)');
        }

        // Guardar progreso
        window.addEventListener('load', () => {
            const progreso = JSON.parse(localStorage.getItem('trinity-progreso-libro3') || '{}');
            progreso.nodoActual = 3;
            progreso.ultimoNodo = Math.max(progreso.ultimoNodo || 0, 3);
            progreso.porcentaje = 42.84;
            localStorage.setItem('trinity-progreso-libro3', JSON.stringify(progreso));
        });

        // Animaciones al scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.contenido-nodo, .cita-destacada, .pregunta-transformadora, .reflexion-box, .meditacion-container').forEach(el => {
            observer.observe(el);
        });
    </script>
</body>
</html>
